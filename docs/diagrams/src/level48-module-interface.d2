title: |md
  # Module Interface Diagram
| {
  near: top-center
  shape: text
  style.font-size: 20
}

L45Modules: {
  label: "Level 4.5 Modules (unchanged)"
  style.border-radius: 8
  style.shadow: true
  style.fill: "#e1bee7"
  style.stroke: "#8e24aa"

  SPE: {
    label: "Self-Projection\nEngine"
    style.border-radius: 6
    style.fill: "#ce93d8"
    style.stroke: "#7b1fa2"
  }
  ARC: {
    label: "Architecture\nRecomposition"
    style.border-radius: 6
    style.fill: "#ce93d8"
    style.stroke: "#7b1fa2"
  }
  PCF: {
    label: "Parallel Cognitive\nFrames"
    style.border-radius: 6
    style.fill: "#ce93d8"
    style.stroke: "#7b1fa2"
  }
  PR: {
    label: "Purpose\nReflection"
    style.border-radius: 6
    style.fill: "#ce93d8"
    style.stroke: "#7b1fa2"
  }
  EG: {
    label: "Existential\nGuard"
    style.border-radius: 6
    style.fill: "#ce93d8"
    style.stroke: "#7b1fa2"
  }
}

L48Modules: {
  label: "Level 4.8 Modules (13 new)"
  style.border-radius: 8
  style.shadow: true
  style.fill: "#f3e5f5"
  style.stroke: "#7b1fa2"
  style.stroke-width: 2

  WM: {
    label: "World Model\nCore"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  BU: {
    label: "Belief\nUpdater"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  CM: {
    label: "Capability\nMatrix"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  CC: {
    label: "Confidence\nCalibrator"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  UDD: {
    label: "Unknown Domain\nDetector"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  SGA: {
    label: "Skill Gap\nAnalyzer"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  WKM: {
    label: "Weakness\nMap"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  GS: {
    label: "Goal\nStack"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  SRA: {
    label: "Strategic Resource\nAllocator"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  DRE: {
    label: "Delayed Reward\nEvaluator"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  SC_node: {
    label: "Strategy\nComparator"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  SV: {
    label: "Stability\nVerifier"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
  ORCH: {
    label: "L48\nOrchestrator"
    style.border-radius: 6
    style.fill: "#e1bee7"
    style.stroke: "#8e24aa"
  }
}

L45Modules.SPE -> L48Modules.WM: "SEOF data" {style.animated: true}
L45Modules.SPE -> L48Modules.SC_node: "projection" {style.animated: true}
L45Modules.PCF -> L48Modules.SC_node: "frame weights" {style.animated: true}
L45Modules.EG -> L48Modules.SV: "guard status" {style.animated: true}
L45Modules.PR -> L48Modules.GS: "purpose vector" {style.animated: true}

L48Modules.ORCH -> L48Modules.WM: {style.stroke-dash: 5}
L48Modules.ORCH -> L48Modules.CM: {style.stroke-dash: 5}
L48Modules.ORCH -> L48Modules.GS: {style.stroke-dash: 5}
L48Modules.ORCH -> L48Modules.SV: {style.stroke-dash: 5}
