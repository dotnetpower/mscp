direction: down

tracking: "Identity Tracking" {
  style.fill: "#e3f2fd"
  style.stroke: "#2196f3"
  style.stroke-width: 2
  style.border-radius: 8
  style.shadow: true

  SNAP: "Periodic Snapshots\nEvery 100 cycles\n(value vector + identity hash)" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  DRIFT: "Drift Detection\nCumulative: < 0.05%/cycle\nInstantaneous: threshold 0.0005" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  SCORE: "Continuity Score\ncosine similarity\nover 10,000-cycle window" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
}

status: "Persistence Classification" {
  style.fill: "#e0e0e0"
  style.stroke: "#616161"
  style.border-radius: 8
  style.shadow: true

  STABLE_S: "Stable\nICS ≥ 0.90" {
    style.fill: "#c8e6c9"
    style.stroke: "#2e7d32"
    style.border-radius: 6
  }
  DRIFTING_S: "Drifting\nICS ∈ [0.20, 0.90)" {
    style.fill: "#fff59d"
    style.stroke: "#f9a825"
    style.border-radius: 6
  }
  DIVERGED_S: "Diverged\nICS < 0.20\nIRREVERSIBLE WARNING" {
    style.fill: "#ffcdd2"
    style.stroke: "#e53935"
    style.stroke-width: 2
    style.border-radius: 6
  }
}

tracking.SNAP -> tracking.SCORE { style.animated: true }
tracking.DRIFT -> tracking.SCORE { style.animated: true }
tracking.SCORE -> status { style.animated: true }
