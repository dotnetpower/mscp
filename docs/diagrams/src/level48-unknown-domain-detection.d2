title: |md
  # Unknown Domain Detection
| {
  near: top-center
  shape: text
  style.font-size: 20
}

Detection: {
  label: "üîç Four Detection Criteria"
  style.border-radius: 8
  style.shadow: true
  style.fill: "#e3f2fd"
  style.stroke: "#2196f3"

  D1: {
    label: "1Ô∏è‚É£ Context Signature\nSimilarity < 0.3 to\nall known domains"
    style.border-radius: 6
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
  }
  D2: {
    label: "2Ô∏è‚É£ Prediction Error\nSpike > 2œÉ above\nhistorical mean"
    style.border-radius: 6
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
  }
  D3: {
    label: "3Ô∏è‚É£ Strategy Failure\nAll top-5 strategies\nscore < 0.3"
    style.border-radius: 6
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
  }
  D4: {
    label: "4Ô∏è‚É£ Feature Distribution\nKL-divergence > threshold\nfrom known distributions"
    style.border-radius: 6
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
  }
}

Decision: {
  label: "ANY 2 of 4 triggered?"
  shape: diamond
  style.border-radius: 6
  style.fill: "#e0e0e0"
  style.stroke: "#616161"
  style.shadow: true
}

YES: {
  label: "‚úÖ Mark as UNKNOWN\nRegister in UnknownDomainRegistry\nTrigger capability gap analysis"
  style.border-radius: 6
  style.fill: "#fff9c4"
  style.stroke: "#fbc02d"
  style.stroke-width: 2
  style.shadow: true
}

NO: {
  label: "üìã Known domain\nUse existing capability matrix"
  style.border-radius: 6
  style.fill: "#c8e6c9"
  style.stroke: "#388e3c"
  style.shadow: true
}

Detection.D1 -> Decision: {style.animated: true}
Detection.D2 -> Decision: {style.animated: true}
Detection.D3 -> Decision: {style.animated: true}
Detection.D4 -> Decision: {style.animated: true}
Decision -> YES: "‚â• 2 triggers" {style.animated: true}
Decision -> NO: "< 2 triggers" {style.animated: true}
