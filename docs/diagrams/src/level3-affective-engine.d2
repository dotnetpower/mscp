direction: down

Input: "ðŸ“Š Metrics Input" {
  style: {
    fill: "#e8f5e9"
    stroke: "#4caf50"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 13
  }
  M1: "prediction_error" {
    style: { fill: "#c8e6c9"; stroke: "#388e3c"; border-radius: 6 }
  }
  M2: "goal_alignment" {
    style: { fill: "#c8e6c9"; stroke: "#388e3c"; border-radius: 6 }
  }
  M3: "identity_stability" {
    style: { fill: "#c8e6c9"; stroke: "#388e3c"; border-radius: 6 }
  }
  M4: "convergence_status" {
    style: { fill: "#c8e6c9"; stroke: "#388e3c"; border-radius: 6 }
  }
  M5: "cognitive_budget" {
    style: { fill: "#c8e6c9"; stroke: "#388e3c"; border-radius: 6 }
  }
}

AE: "ðŸ’œ Affective Engine" {
  style: {
    fill: "#e1bee7"
    stroke: "#8e24aa"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 14
    stroke-width: 2
  }
  AF: "5-Dim Affect Vector" {
    style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6; bold: true }
  }

  Dims: "Dimensions" {
    style: { fill: "#f3e5f5"; stroke: "#8e24aa"; border-radius: 8; shadow: true }
    D1: "Curiosity = 0.3 (default)" {
      style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6 }
    }
    D2: "Frustration = 0.0" {
      style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6 }
    }
    D3: "Satisfaction = 0.5" {
      style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6 }
    }
    D4: "Anxiety = 0.0" {
      style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6 }
    }
    D5: "Excitement = 0.2" {
      style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6 }
    }
  }

  Derived: "Derived Signals" {
    style: { fill: "#f3e5f5"; stroke: "#8e24aa"; border-radius: 8; shadow: true }
    V: "Valence âˆˆ [-1, 1]\n= (positive - negative) / 2" {
      style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6 }
    }
    DR: "Motivation Drives:\nâ€¢ exploration_drive\nâ€¢ consolidation_drive\nâ€¢ avoidance_drive\nâ€¢ urgency_modifier [0.5, 2.0]" {
      style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6; font-size: 11 }
    }
  }
}

Rules: "ðŸ“ Design Rules" {
  style: {
    fill: "#f5f5f5"
    stroke: "#9e9e9e"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 13
  }
  R1: "1. Derived from metrics ONLY\n(no raw sentiment injection)" {
    style: { fill: "#e0e0e0"; stroke: "#616161"; border-radius: 6; font-size: 11 }
  }
  R2: "2. INERTIA_FACTOR = 0.7\n(prevents sudden shifts)" {
    style: { fill: "#e0e0e0"; stroke: "#616161"; border-radius: 6; font-size: 11 }
  }
  R3: "3. DECAY_RATE = 0.05\n(regresses to neutral)" {
    style: { fill: "#e0e0e0"; stroke: "#616161"; border-radius: 6; font-size: 11 }
  }
  R4: "4. Cannot dominate\ndecision-making" {
    style: { fill: "#e0e0e0"; stroke: "#616161"; border-radius: 6; font-size: 11 }
  }
}

Input -> AE: {
  style.animated: true
  style.stroke: "#8e24aa"
  style.stroke-width: 3
}
AE -> Rules: {
  style.animated: true
  style.stroke: "#616161"
  style.stroke-width: 2
}
