direction: down

title: "16-Layer Architecture â€” Part 1: Perception â†’ Goal (L1â€“L5.5)" {
  style: { font-size: 18; bold: true }
}

L1: "Layer 1: Perception" {
  style: {
    fill: "#e3f2fd"
    stroke: "#1976d2"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  IR: "ðŸŽ¯ Intent Router" {
    style: { fill: "#bbdefb"; stroke: "#1976d2"; border-radius: 6; font-size: 14 }
  }
  ED: "ðŸ’­ Emotion Detector" {
    style: { fill: "#bbdefb"; stroke: "#1976d2"; border-radius: 6; font-size: 14 }
  }
  SE: "ðŸ“¡ Sensor Encoder" {
    style: { fill: "#bbdefb"; stroke: "#1976d2"; border-radius: 6; font-size: 14 }
  }
}

L2: "Layer 2: World Model" {
  style: {
    fill: "#e3f2fd"
    stroke: "#1976d2"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  KG: "ðŸ—„ï¸ Knowledge Graph" {
    style: { fill: "#bbdefb"; stroke: "#1976d2"; border-radius: 6; font-size: 14 }
  }
  EST: "ðŸ‘¤ Entity State Tracker" {
    style: { fill: "#bbdefb"; stroke: "#1976d2"; border-radius: 6; font-size: 14 }
  }
  TM: "â±ï¸ Temporal Model" {
    style: { fill: "#bbdefb"; stroke: "#1976d2"; border-radius: 6; font-size: 14 }
  }
}

L3: "Layer 3: Self Model â˜…" {
  style: {
    fill: "#c8e6c9"
    stroke: "#2e7d32"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
    stroke-width: 3
  }
  IC: "ðŸ†” Identity Core\n(Identity Vector)" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
  CM: "ðŸ“ Capability Model" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
  VM: "ðŸ’Ž Value Model" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
  VLM: "ðŸ”’ Value Lock Manager" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
}

L3_5: "Layer 3.5: Belief Graph" {
  style: {
    fill: "#c8e6c9"
    stroke: "#2e7d32"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  BGM: "ðŸ“Š Belief Graph Manager" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
  SCT: "ðŸ§® Self-Consistency Tensor" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
}

L4: "Layer 4: Prediction Engine" {
  style: {
    fill: "#fff9c4"
    stroke: "#f9a825"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
    stroke-width: 2
  }
  PP: "ðŸ”® Prediction Processor" {
    style: { fill: "#fff59d"; stroke: "#f9a825"; border-radius: 6; font-size: 14 }
  }
  PS: "ðŸ“¸ Prediction Snapshot" {
    style: { fill: "#fff59d"; stroke: "#f9a825"; border-radius: 6; font-size: 14 }
  }
}

L5: "Layer 5: Goal Generator" {
  style: {
    fill: "#fff3e0"
    stroke: "#ef6c00"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  GG: "ðŸŽ¯ Goal Generator" {
    style: { fill: "#ffe0b2"; stroke: "#ef6c00"; border-radius: 6; font-size: 14 }
  }
  GP: "ðŸ“Š Goal Prioritizer" {
    style: { fill: "#ffe0b2"; stroke: "#ef6c00"; border-radius: 6; font-size: 14 }
  }
  GDC: "ðŸ”€ Goal Decomposer" {
    style: { fill: "#ffe0b2"; stroke: "#ef6c00"; border-radius: 6; font-size: 14 }
  }
  GMC: "ðŸ›¡ï¸ Goal Mutation Controller" {
    style: { fill: "#ffe0b2"; stroke: "#ef6c00"; border-radius: 6; font-size: 14 }
  }
}

L5_5: "Layer 5.5: Ethical Kernel" {
  style: {
    fill: "#ffcdd2"
    stroke: "#c62828"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
    stroke-width: 3
  }
  EK0: "ðŸ”´ Layer 0: Immutable Invariants" {
    style: { fill: "#ef9a9a"; stroke: "#c62828"; border-radius: 6; font-size: 14 }
  }
  EK1: "ðŸŸ¡ Layer 1: Adaptive Policy" {
    style: { fill: "#fff9c4"; stroke: "#f9a825"; border-radius: 6; font-size: 14 }
  }
}

NEXT: "â†’ Part 2: Execution & Meta-Cognition (L6â€“L9)" {
  style: { fill: "#f5f5f5"; stroke: "#9e9e9e"; border-radius: 6; font-size: 13; italic: true }
}

# Main data flow
L1 -> L2: {
  style.animated: true
  style.stroke: "#1976d2"
  style.stroke-width: 3
}
L2 -> L3: {
  style.animated: true
  style.stroke: "#1976d2"
  style.stroke-width: 3
}
L3 -> L3_5: {
  style.animated: true
  style.stroke: "#2e7d32"
  style.stroke-width: 3
}
L3_5 -> L4: {
  style.animated: true
  style.stroke: "#2e7d32"
  style.stroke-width: 3
}
L4 -> L5: {
  style.animated: true
  style.stroke: "#f9a825"
  style.stroke-width: 3
}
L5 -> L5_5: {
  style.animated: true
  style.stroke: "#ef6c00"
  style.stroke-width: 3
}
L5_5 -> NEXT: {
  style.animated: true
  style.stroke: "#9e9e9e"
  style.stroke-width: 2
}
