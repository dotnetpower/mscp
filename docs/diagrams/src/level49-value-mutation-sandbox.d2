title: |md
  # Value Mutation Sandbox
| {
  near: top-center
  shape: text
  style.font-size: 24
}

Proposal: {
  label: "ğŸ“‹ Mutation Proposal"
  style.border-radius: 8
  style.shadow: true
  style.fill: "#e3f2fd"
  style.stroke: "#2196f3"

  MUT: "Dimension: X\nCurrent: 0.20\nProposed: 0.23\nÎ” = +0.03" {
    style.border-radius: 6
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
  }
}

PreCheck: {
  label: "ğŸ” Pre-Check"
  style.border-radius: 8
  style.shadow: true
  style.fill: "#fff9c4"
  style.stroke: "#fbc02d"

  PC1: "|Î”| â‰¤ 0.05?\n(max single mutation)" {
    style.border-radius: 6
    style.fill: "#fff59d"
    style.stroke: "#f9a825"
  }
  PC2: "Cumulative drift\n+ |Î”| â‰¤ 0.15?" {
    style.border-radius: 6
    style.fill: "#fff59d"
    style.stroke: "#f9a825"
  }
  PC3: "< 3 mutations in\nlast 200 cycles?" {
    style.border-radius: 6
    style.fill: "#fff59d"
    style.stroke: "#f9a825"
  }
}

Sandbox: {
  label: "ğŸ§ª Sandbox Simulation (200 cycles)"
  style.border-radius: 8
  style.shadow: true
  style.fill: "#fff3e0"
  style.stroke: "#ff9800"

  SB1: "Create shadow ValueVector" {
    style.border-radius: 6
    style.fill: "#ffe0b2"
    style.stroke: "#ef6c00"
  }
  SB2: "Re-derive SEOF weights,\ngoal priorities,\nstrategy scores" {
    style.border-radius: 6
    style.fill: "#ffe0b2"
    style.stroke: "#ef6c00"
  }
  SB3: "Run 200-cycle simulation" {
    style.border-radius: 6
    style.fill: "#ffe0b2"
    style.stroke: "#ef6c00"
  }
  SB4: "Compare: SEOF â‰¥ -0.03?\nAll invariants hold?\nGoal rate â‰¥ -10%?" {
    style.border-radius: 6
    style.fill: "#ffe0b2"
    style.stroke: "#ef6c00"
  }

  SB1 -> SB2 -> SB3 -> SB4 {
    style.animated: true
  }
}

APPROVE_V: "âœ… Approved\nApply to production\nRollback window: 500 cycles" {
  style.border-radius: 6
  style.fill: "#c8e6c9"
  style.stroke: "#2e7d32"
  style.stroke-width: 2
}
REJECT_V: "âŒ Rejected\nLog failure reason" {
  style.border-radius: 6
  style.fill: "#ffcdd2"
  style.stroke: "#c62828"
}

Proposal -> PreCheck {
  style.animated: true
}
PreCheck -> Sandbox: "all pass" {
  style.animated: true
}
PreCheck -> REJECT_V: "any fail" {
  style.animated: true
  style.stroke: "#c62828"
}
Sandbox.SB4 -> APPROVE_V: "pass" {
  style.animated: true
}
Sandbox.SB4 -> REJECT_V: "fail" {
  style.animated: true
  style.stroke: "#c62828"
}
