PRE: "PRE-CHECK: BGSS >= 0.7?" {
  style: {
    fill: "#ffcdd2"
    stroke: "#c62828"
    border-radius: 8
    shadow: true
    stroke-width: 2
  }
}

MetaProcesses: "Six Supervisory Processes" {
  style: {
    fill: "#f5f5f5"
    stroke: "#9e9e9e"
    border-radius: 8
    shadow: true
  }

  I: "I. External Validation\n(prevent self-confirmation bias)\n+-5% perturbation test" {
    style: {
      fill: "#e3f2fd"
      stroke: "#1976d2"
      border-radius: 6
    }
  }

  II: "II. Proactive Capability Projector\n(predict future gaps)\nPreemptiveGapProb > 0.6" {
    style: {
      fill: "#e3f2fd"
      stroke: "#1976d2"
      border-radius: 6
    }
  }

  III: "III. Strategy Archetype Generator\n(topology-level changes)\ndelta_SEF >= +10% required" {
    style: {
      fill: "#e3f2fd"
      stroke: "#1976d2"
      border-radius: 6
    }
  }

  IV: "IV. Layered Identity Evolution\n(evolve adaptive traits only)\nLayer 2 max 5%/cycle" {
    style: {
      fill: "#fff9c4"
      stroke: "#f9a825"
      border-radius: 6
    }
  }

  V: "V. Emergence Detector\n(detect unexpected changes)\nStatistical anomaly: mean +- 2sigma" {
    style: {
      fill: "#fff9c4"
      stroke: "#f9a825"
      border-radius: 6
    }
  }

  VI: "VI. Directional Growth Controller\n(balanced expansion)\n4D growth vector, mag < 0.2" {
    style: {
      fill: "#fff9c4"
      stroke: "#f9a825"
      border-radius: 6
    }
  }

  I -> II: {
    style.animated: true
  }
  II -> III: {
    style.animated: true
  }
  III -> IV: {
    style.animated: true
  }
  IV -> V: {
    style.animated: true
  }
  V -> VI: {
    style.animated: true
  }
}

POST: "POST-CHECK: Invariants valid?" {
  style: {
    fill: "#ffcdd2"
    stroke: "#c62828"
    border-radius: 8
    shadow: true
    stroke-width: 2
  }
}

HALT: "HALT all meta-processes" {
  style: {
    fill: "#ef9a9a"
    stroke: "#b71c1c"
    border-radius: 8
    shadow: true
  }
}

PRE -> MetaProcesses.I: "pass" {
  style.animated: true
  style.stroke: "#2e7d32"
}

PRE -> HALT: "fail" {
  style.animated: true
  style.stroke: "#c62828"
}

MetaProcesses.VI -> POST: {
  style.animated: true
}
