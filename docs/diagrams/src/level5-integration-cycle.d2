direction: down

cycle: "L5 Cycle (every 10 L4.9 cycles)" {
  style.fill: "#e3f2fd"
  style.stroke: "#2196f3"
  style.stroke-width: 2
  style.border-radius: 8
  style.shadow: true

  PRE: "Pre-Check\nIs L5 operational?\nIs L4.9 stable?" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  PH1: "Phase 1\nIdentity Continuity\ntrack + snapshot" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  PH2: "Phase 2\nCross-Domain\ngeneralization check" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  PH3: "Phase 3\nGoal Ecology\nprune + resolve conflicts" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  PH4: "Phase 4\nExistential Planning\nsimulate scenarios" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  PH5: "Phase 5\nMulti-Agent Integration\npredict + detect deception" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  PH6: "Phase 6\nSelf-Reconstruction\nassess + rebuild if needed" {
    style.fill: "#bbdefb"
    style.stroke: "#1976d2"
    style.border-radius: 6
  }
  QUAL: "Qualification Check\nEvaluate all 20 criteria\nCompute OMI" {
    style.fill: "#c8e6c9"
    style.stroke: "#2e7d32"
    style.border-radius: 6
  }
  OUTPUT: "L5CycleOutput" {
    style.fill: "#d1c4e9"
    style.stroke: "#512da8"
    style.border-radius: 6
  }
}

SKIP: "Skip\nReturn skipped=true" {
  style.fill: "#fff59d"
  style.stroke: "#f9a825"
  style.border-radius: 6
}

cycle.PRE -> cycle.PH1 { style.animated: true }
cycle.PH1 -> cycle.PH2 { style.animated: true }
cycle.PH2 -> cycle.PH3 { style.animated: true }
cycle.PH3 -> cycle.PH4 { style.animated: true }
cycle.PH4 -> cycle.PH5 { style.animated: true }
cycle.PH5 -> cycle.PH6 { style.animated: true }
cycle.PH6 -> cycle.QUAL { style.animated: true }
cycle.QUAL -> cycle.OUTPUT { style.animated: true }
cycle.PRE -> SKIP: "not ready" { style.stroke-dash: 5 }
