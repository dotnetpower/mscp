direction: down

title: "16-Layer Architecture â€” Part 2: Execution & Meta-Cognition (L6â€“L9)" {
  style: { font-size: 18; bold: true }
}

PREV: "â† Part 1: Perception â†’ Goal (L1â€“L5.5)" {
  style: { fill: "#f5f5f5"; stroke: "#9e9e9e"; border-radius: 6; font-size: 13; italic: true }
}

L6: "Layer 6: Action Planner" {
  style: {
    fill: "#ede7f6"
    stroke: "#7b1fa2"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  EM: "ðŸ“‹ Execution Monitor" {
    style: { fill: "#d1c4e9"; stroke: "#512da8"; border-radius: 6; font-size: 14 }
  }
  SEV: "ðŸ“ˆ Strategy Evaluator" {
    style: { fill: "#d1c4e9"; stroke: "#512da8"; border-radius: 6; font-size: 14 }
  }
}

L7: "Layer 7: LLM Engine" {
  style: {
    fill: "#ede7f6"
    stroke: "#7b1fa2"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  LLM: "ðŸ§  LLM Backend" {
    style: { fill: "#d1c4e9"; stroke: "#512da8"; border-radius: 6; font-size: 14 }
  }
  MJ: "âš–ï¸ Meta Judge\n(lightweight LLM)" {
    style: { fill: "#d1c4e9"; stroke: "#512da8"; border-radius: 6; font-size: 14 }
  }
}

L8: "Layer 8: MetaCognition" {
  style: {
    fill: "#fff9c4"
    stroke: "#f9a825"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
    stroke-width: 2
  }
  MCC: "ðŸ”„ MetaCognition Comparator" {
    style: { fill: "#fff59d"; stroke: "#f9a825"; border-radius: 6; font-size: 14 }
  }
  IS: "ðŸ“ Identity Stabilizer" {
    style: { fill: "#fff59d"; stroke: "#f9a825"; border-radius: 6; font-size: 14 }
  }
}

L9: "Layer 9: Self-Update Loop" {
  style: {
    fill: "#c8e6c9"
    stroke: "#2e7d32"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  IU: "âœï¸ Identity Updater" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
  GWA: "âš–ï¸ Goal Weight Adjuster" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
  CC: "ðŸ“ Capability Calibrator" {
    style: { fill: "#a5d6a7"; stroke: "#2e7d32"; border-radius: 6; font-size: 14 }
  }
}

SELF_MODEL: "â†» Back to L3: Self Model" {
  style: { fill: "#c8e6c9"; stroke: "#2e7d32"; border-radius: 6; font-size: 13; italic: true }
}

NEXT: "â†’ Part 3: Safety & Infrastructure (L10â€“L16)" {
  style: { fill: "#f5f5f5"; stroke: "#9e9e9e"; border-radius: 6; font-size: 13; italic: true }
}

# Connections
PREV -> L6: {
  style.animated: true
  style.stroke: "#9e9e9e"
  style.stroke-width: 2
}

L6 -> L7: {
  style.animated: true
  style.stroke: "#7b1fa2"
  style.stroke-width: 3
}

# Meta-cognition loop
L7 -> L8: "result" {
  style.stroke: "#f9a825"
  style.stroke-width: 2
  style.stroke-dash: 5
}
L8 -> L9: "comparison" {
  style.stroke: "#f9a825"
  style.stroke-width: 2
  style.stroke-dash: 5
}
L9 -> SELF_MODEL: "update\n(delta-clamped)" {
  style.stroke: "#2e7d32"
  style.stroke-width: 2
  style.stroke-dash: 5
}

L9 -> NEXT: "guard check" {
  style.animated: true
  style.stroke: "#9e9e9e"
  style.stroke-width: 2
}
