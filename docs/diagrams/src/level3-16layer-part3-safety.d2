direction: down

title: "16-Layer Architecture â€” Part 3: Safety & Infrastructure (L10â€“L16)" {
  style: { font-size: 18; bold: true }
}

PREV: "â† Part 2: Execution & Meta-Cognition (L6â€“L9)" {
  style: { fill: "#f5f5f5"; stroke: "#9e9e9e"; border-radius: 6; font-size: 13; italic: true }
}

L10: "Layer 10: Escalation Guard" {
  style: {
    fill: "#ffcdd2"
    stroke: "#c62828"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  RG: "ðŸš« Recursion Guard" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
  RC: "âª Rollback Controller" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
  CDM: "â¸ï¸ Cooldown Manager" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
}

L11: "Layer 11: Depth Controller" {
  style: {
    fill: "#ffcdd2"
    stroke: "#c62828"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  MDC: "ðŸ“ Meta Depth Controller\n(max depth: 2)" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
}

L12: "Layer 12: Stability Controller" {
  style: {
    fill: "#ffcdd2"
    stroke: "#c62828"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  LYA: "ðŸ“‰ Lyapunov Convergence" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
  OD: "ðŸ”„ Oscillation Detector" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
}

L13: "Layer 13: Budget Controller" {
  style: {
    fill: "#e0e0e0"
    stroke: "#616161"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  BA: "ðŸ’° Budget Allocator" {
    style: { fill: "#bdbdbd"; stroke: "#616161"; border-radius: 6; font-size: 14 }
  }
  GDG: "ðŸ“‰ Graceful Degradation" {
    style: { fill: "#bdbdbd"; stroke: "#616161"; border-radius: 6; font-size: 14 }
  }
}

L14: "Layer 14: Global Workspace" {
  style: {
    fill: "#e0e0e0"
    stroke: "#616161"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  GSS: "ðŸŒ Global State Snapshot" {
    style: { fill: "#bdbdbd"; stroke: "#616161"; border-radius: 6; font-size: 14 }
  }
  SYN: "ðŸ”„ Synchronizer" {
    style: { fill: "#bdbdbd"; stroke: "#616161"; border-radius: 6; font-size: 14 }
  }
}

L15: "Layer 15: Affective Engine" {
  style: {
    fill: "#e1bee7"
    stroke: "#8e24aa"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  ASV: "ðŸ˜Š Affect State Vector\n(5 dimensions)" {
    style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6; font-size: 14 }
  }
  MS: "ðŸ’¡ Motivation Synthesizer" {
    style: { fill: "#ce93d8"; stroke: "#8e24aa"; border-radius: 6; font-size: 14 }
  }
}

L16: "Layer 16: Survival Instinct" {
  style: {
    fill: "#ffcdd2"
    stroke: "#c62828"
    border-radius: 8
    shadow: true
    bold: true
    font-size: 15
  }
  HM: "ðŸ  Homeostatic Monitor" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
  TP: "âš¡ Threat Predictor" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
  SGG: "ðŸ›¡ï¸ Survival Goal Generator" {
    style: { fill: "#ef9a9a"; stroke: "#e53935"; border-radius: 6; font-size: 14 }
  }
}

GOAL_GEN: "â†» Back to L5: Goal Generator" {
  style: { fill: "#fff3e0"; stroke: "#ef6c00"; border-radius: 6; font-size: 13; italic: true }
}

# Connections
PREV -> L10: {
  style.animated: true
  style.stroke: "#9e9e9e"
  style.stroke-width: 2
}

# Safety chain
L10 -> L11: "depth control" {
  style.stroke: "#c62828"
  style.stroke-width: 2
  style.stroke-dash: 5
}
L11 -> L12: "stability check" {
  style.stroke: "#c62828"
  style.stroke-width: 2
  style.stroke-dash: 5
}

# Budget & global workspace
L12 -> L13: "budget gate" {
  style.stroke: "#616161"
  style.stroke-width: 2
  style.stroke-dash: 5
}
L13 -> L14: "broadcast" {
  style.stroke: "#616161"
  style.stroke-width: 2
  style.stroke-dash: 5
}

# Affect & survival (v4)
L14 -> L15: "cognitive state" {
  style.stroke: "#8e24aa"
  style.stroke-width: 2
  style.stroke-dash: 5
}
L15 -> L16: "motivation signal" {
  style.stroke: "#8e24aa"
  style.stroke-width: 2
  style.stroke-dash: 5
}
L16 -> GOAL_GEN: "survival goals" {
  style.stroke: "#c62828"
  style.stroke-width: 2
  style.stroke-dash: 5
}
